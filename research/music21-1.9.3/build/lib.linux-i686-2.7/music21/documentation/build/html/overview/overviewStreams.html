
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview: Streams, Scores, Parts, and Measures &mdash; music21 Documentation</title>
    
    <link rel="stylesheet" href="../_static/m21.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.9.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <link rel="top" title="music21 Documentation" href="../index.html" />
    <link rel="up" title="Music21 Concepts Overview" href="index.html" />
    <link rel="next" title="Overview: Importing File and Data Formats" href="overviewFormats.html" />
    <link rel="prev" title="Music21 Concepts Overview" href="index.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro|Open+Sans:300italic,400italic,700italic,400,300,700' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overviewFormats.html" title="Overview: Importing File and Data Formats"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Music21 Concepts Overview"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">music21</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Music21 Concepts Overview</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Music21 Concepts Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="overviewFormats.html"
                        title="next chapter">Overview: Importing File and Data Formats</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview: Streams, Scores, Parts, and Measures</a><ul>
<li><a class="reference internal" href="#appending-and-inserting-objects-into-streams">Appending and Inserting Objects into Streams</a></li>
<li><a class="reference internal" href="#accessing-stream-elements-by-iteration-and-index">Accessing Stream Elements by Iteration and Index</a></li>
<li><a class="reference internal" href="#accessing-stream-elements-by-class-and-offset">Accessing Stream Elements by Class and Offset</a></li>
<li><a class="reference internal" href="#accessing-scores-parts-measures-and-notes">Accessing Scores, Parts, Measures, and Notes</a></li>
<li><a class="reference internal" href="#flattening-hierarchical-streams">Flattening Hierarchical Streams</a></li>
<li><a class="reference internal" href="#accessing-stream-elements-by-id-and-group">Accessing Stream Elements by Id and Group</a></li>
<li><a class="reference internal" href="#visualizing-streams-in-plots">Visualizing Streams in Plots</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-topic-ordering-streams">Advanced Topic: Ordering Streams</a></li>
</ul>

<h3><a href="../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About Music21</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Music21 Concepts Overview</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Overview: Streams, Scores, Parts, and Measures</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-topic-ordering-streams">Advanced Topic: Ordering Streams</a></li>
<li class="toctree-l2"><a class="reference internal" href="overviewFormats.html">Overview: Importing File and Data Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="overviewPostTonal.html">Overview: Post-Tonal Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="overviewMeters.html">Overview: Meters, Time Signatures, and Processing Beams, Accents, and Beats</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usersGuide/index.html">Users Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../systemReference/index.html">System Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../moduleReference/index.html">Module Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developerReference/index.html">Developer Reference</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/overview/overviewStreams.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview-streams-scores-parts-and-measures">
<span id="overviewstreams"></span><h1>Overview: Streams, Scores, Parts, and Measures<a class="headerlink" href="#overview-streams-scores-parts-and-measures" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream" title="music21.stream.Stream"><tt class="xref py py-class docutils literal"><span class="pre">Stream</span></tt></a> object and its subclasses (Score,
Part, Measure) are the fundamental containers for music21 objects such
as <a class="reference internal" href="../moduleReference/moduleNote.html#music21.note.Note" title="music21.note.Note"><tt class="xref py py-class docutils literal"><span class="pre">Note</span></tt></a>, <a class="reference internal" href="../moduleReference/moduleChord.html#music21.chord.Chord" title="music21.chord.Chord"><tt class="xref py py-class docutils literal"><span class="pre">Chord</span></tt></a>,
<a class="reference internal" href="../moduleReference/moduleClef.html#music21.clef.Clef" title="music21.clef.Clef"><tt class="xref py py-class docutils literal"><span class="pre">Clef</span></tt></a>, <a class="reference internal" href="../moduleReference/moduleMeter.html#music21.meter.TimeSignature" title="music21.meter.TimeSignature"><tt class="xref py py-class docutils literal"><span class="pre">TimeSignature</span></tt></a> objects.</p>
<p>A container is like a Python list
(or an array in some languages).</p>
<p>Objects stored in a Stream are generally spaced in time; each stored object has
an offset usually representing how many quarter notes it lies from the beginning
of the Stream.  For instance in a 4/4 measure of two half notes, the first note
will be at offset 0.0, and the second at offset 2.0.</p>
<p>Streams, further, can store other Streams, permitting a wide variety of nested,
ordered, and timed structures.  These stored streams also have offsets.  So if
we put two 4/4 Measure objects (subclasses of Stream) into a Part (also a
type of Stream), then the first measure will be at offset 0.0 and the second
measure will be at offset 4.0.</p>
<p>Commonly used subclasses of Streams include the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Score" title="music21.stream.Score"><tt class="xref py py-class docutils literal"><span class="pre">Score</span></tt></a>,
<a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Part" title="music21.stream.Part"><tt class="xref py py-class docutils literal"><span class="pre">Part</span></tt></a>, and <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Measure" title="music21.stream.Measure"><tt class="xref py py-class docutils literal"><span class="pre">Measure</span></tt></a>. It is
important to grasp that any time we want to collect and contain a group of
music21 objects, we put them into a Stream. Streams can also be used for
less conventional organizational structures. We frequently will build and pass
around short-lived, temporary Streams, since doing this opens up a wide variety
of tools for extracting, processing, and manipulating objects on the Stream.
For instance, if you are looking at only notes on beat 2 of any measure, you&#8217;ll
probably want to put them into a Stream as well.</p>
<p>A critical feature of music21&#8217;s design that distinguishes it from other
music analysis frameworks is that one music21 object can be
simultaneously stored (or, more accurately, referenced) in more than one Stream.
For examples, we might have numerous <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Measure" title="music21.stream.Measure"><tt class="xref py py-class docutils literal"><span class="pre">Measure</span></tt></a> Streams
contained in a <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Part" title="music21.stream.Part"><tt class="xref py py-class docutils literal"><span class="pre">Part</span></tt></a> Stream. If we extract a region of
this Part (using the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.measures" title="music21.stream.Stream.measures"><tt class="xref py py-meth docutils literal"><span class="pre">measures()</span></tt></a> method), we get a
new Stream containing the specified Measures and the contained notes. We have
not actually created new
notes within these extracted measures; the output Stream simply has references
to the
same objects. Changes made to Notes in this output Stream will be simultaneously
reflected in Notes in the source Part.   There is one limitation though:
the same object should not appear twice in one hierarchical structure of Streams.
For instance, you should not put a note object in both measure 3 and measure 5
of the same piece &#8211; it can appear in measure 3 of one piece and measure 5 of
another piece. (For instance, if you wanted to track a particular note&#8217;s context
in an original version of a score and an arrangement). Most users will never
need to worry about these details: just know that this feature lets music21
do some things that no other software package can do.</p>
<p>Enough about what Streams are.  The rest of this overview will show you what
you can do with them. (For complete
documentation on Streams, see <a class="reference internal" href="../moduleReference/moduleStream.html#modulestream"><em>music21.stream</em></a>.)</p>
<div class="section" id="appending-and-inserting-objects-into-streams">
<h2>Appending and Inserting Objects into Streams<a class="headerlink" href="#appending-and-inserting-objects-into-streams" title="Permalink to this headline">¶</a></h2>
<p>Streams structure and position music21 objects.  These objects
are structured hierarchically (for instance in a Measure in a Part
in a Score) and temporally (e.g., at offset 4 in a Measure).</p>
<p>Objects stored in Streams are called elements and must be some type
of <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.Music21Object" title="music21.base.Music21Object"><tt class="xref py py-class docutils literal"><span class="pre">Music21Object</span></tt></a> (don&#8217;t worry, almost everything
in music21 is a Music21Object, such as Note, Chord, TimeSignature, etc.).</p>
<p>(If you want to put an object that&#8217;s not a Music21Object in a Stream,
put it in an <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.ElementWrapper" title="music21.base.ElementWrapper"><tt class="xref py py-class docutils literal"><span class="pre">ElementWrapper</span></tt></a>.)</p>
<p>Streams store their objects internally on a list called
<a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.elements" title="music21.stream.Stream.elements"><tt class="xref py py-attr docutils literal"><span class="pre">elements</span></tt></a>, though you&#8217;ll rarely need to
deal with this directly.</p>
<p>The most common use of Streams is as places to store Notes. For an
introduction to what you can do with Notes, see <a class="reference internal" href="../usersGuide/usersGuide_02_notes.html#usersguide-02-notes"><em>User&#8217;s Guide, Chapter 2: Notes</em></a>;
and for complete documentation on Notes, see <a class="reference internal" href="../moduleReference/moduleNote.html#modulenote"><em>music21.note</em></a>.</p>
<p>Notes, like all Music21Objects, have a .duration property (which is a
<a class="reference internal" href="../moduleReference/moduleDuration.html#music21.duration.Duration" title="music21.duration.Duration"><tt class="xref py py-class docutils literal"><span class="pre">Duration</span></tt></a> object) that describes how long they
are and what they should look like on page. Though the span of a
Duration can mean many things (the number of seconds it lasts; the number
of inches in a graphic notation score), by default, and by far the most
common use is as quarter lengths (QLs), that is the number of number of
quarter notes they last.  A quarter note has duration 1.0, a whole has 4.0,
a dotted eighth 0.75, and a triplet-16th 0.166667 (approximately).</p>
<p>As we mentioned earlier, when placed in a Stream, Notes and other
elements also have an <strong>offset</strong> (stored in .offset)
that describes their position from the beginning of the stream.
These offset values are also given in QLs.</p>
<p>To begin, lets create a Stream and a Note. We will set the
<a class="reference internal" href="../moduleReference/modulePitch.html#music21.pitch.Pitch" title="music21.pitch.Pitch"><tt class="xref py py-class docutils literal"><span class="pre">Pitch</span></tt></a> object to E above middle C, and set the
<a class="reference internal" href="../moduleReference/moduleDuration.html#music21.duration.Duration" title="music21.duration.Duration"><tt class="xref py py-class docutils literal"><span class="pre">Duration</span></tt></a> object to represent a half-note (2 QLs).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n1</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n1</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;E4&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n1</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s">&#39;half&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n1</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
<span class="go">2.0</span>
</pre></div>
</div>
<p>Now we&#8217;ll put the quarter note in the Stream.
There is more than one way to do this. A convenient way is with the Stream
method <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.append" title="music21.stream.Stream.append"><tt class="xref py py-meth docutils literal"><span class="pre">append()</span></tt></a> which puts it at the end of the Stream.
This is related to, but more powerful than, the <cite>append()</cite> method of Python lists.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n1</span><span class="p">)</span>
</pre></div>
</div>
<p>After putting the note in the stream, there are a number of ways to confirm that
our Note is actually in the Stream. We can use the Python <cite>len()</cite> function to tell us
the number of elements on the Stream.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Alternatively, we can use the <tt class="xref py py-meth docutils literal"><span class="pre">show()</span></tt> method
called as show(&#8216;text&#8217;) to see what is in the Stream and what its offset
is (here 0.0, since we put it at the end of an empty stream).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{0.0} &lt;music21.note.Note E&gt;</span>
</pre></div>
</div>
<p>If you&#8217;ve setup your environment properly, then calling show with the
&#8216;musicxml&#8217;
argument should open up Finale Reader, or Sibelius, or
MuseScore or some music notation
software and display the notes below.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<img alt="../_images/overviewStreams-01.png" src="../_images/overviewStreams-01.png" style="width: 600px;" />
<p>Every element on a Stream has an offset in that Stream (and possibly
other Streams). In the last example, no offset was given with the
<a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.append" title="music21.stream.Stream.append"><tt class="xref py py-meth docutils literal"><span class="pre">append()</span></tt></a> method. This method automatically
gets an offset for newly-appended objects based on the objects that
are already on the Stream. Specifically, the object with the highest
offset and combined duration. Generally, this is the next available
offset after all current elements have sounded. Whenever we append,
we are adding to the end.</p>
<p>If we add another Note with <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.append" title="music21.stream.Stream.append"><tt class="xref py py-meth docutils literal"><span class="pre">append()</span></tt></a>,
its offset will automatically be set to the end of the previously added Note.</p>
<p>Let&#8217;s create a second note, called n2.  This time we will set the
pitch name of the note at the moment of creation as F# above middle C.
Then we will set its quarter length to 0.5, or an eighth note.  Notice
also that last time we called n1.duration.quarterLength and this time
just n2.quarterLength &#8211; they&#8217;re exactly the same thing.  The latter is
just a shortcut to the former, since we use quarterLength so often.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;f#4&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we see that there are two notes in the Stream</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">2</span>
</pre></div>
</div>
<p>We also can see that n2 was placed at offset 2.0, i.e. just
after the end of n1, which was a half note.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span><span class="o">.</span><span class="n">offset</span>
<span class="go">2.0</span>
</pre></div>
</div>
<p>Now when we view the stream, either with show(&#8216;text&#8217;) or show(&#8216;musicxml&#8217;)
we&#8217;ll see two notes.  (N.B. you can usually call show(&#8216;musicxml&#8217;) just as
show() since musicxml is generally the default).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{0.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note F#&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>   
</pre></div>
</div>
<img alt="../_images/overviewStreams-02.png" src="../_images/overviewStreams-02.png" style="width: 600px;" />
<p>In addition to viewing the length of the Stream and the output provided by the <tt class="xref py py-meth docutils literal"><span class="pre">show()</span></tt> method, we can examine other properties of the Stream. Each Stream can return a Duration object, representing the Duration of the entire Stream. Similarly, we can look at the Stream&#8217;s <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.highestTime" title="music21.stream.Stream.highestTime"><tt class="xref py py-attr docutils literal"><span class="pre">highestTime</span></tt></a> property, which returns the QL value of the element with the largest combined offset and Duration. The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.lowestOffset" title="music21.stream.Stream.lowestOffset"><tt class="xref py py-attr docutils literal"><span class="pre">lowestOffset</span></tt></a> property returns the minimum of all offsets for all elements on the Stream.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">duration</span><span class="o">.</span><span class="n">quarterLength</span>
<span class="go">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">highestTime</span>
<span class="go">2.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">lowestOffset</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>We can add a number of independent, unique copies of the same Note with the Stream method <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.repeatAppend" title="music21.stream.Stream.repeatAppend"><tt class="xref py py-meth docutils literal"><span class="pre">repeatAppend()</span></tt></a>. This creates independent copies (using Python&#8217;s <cite>copy.deepcopy</cite> function) of the supplied object, not references. The user must supply an object to be copied and the number of times that object is to be repeatedly placed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n3</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;d#5&#39;</span><span class="p">)</span> <span class="c"># octave values can be included in creation arguments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n3</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="o">.</span><span class="mi">25</span> <span class="c"># a sixteenth note</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">repeatAppend</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">highestTime</span>
<span class="go">4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{0.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note F#&gt;</span>
<span class="go">{2.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{2.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.25} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.75} &lt;music21.note.Note D#&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>   
</pre></div>
</div>
<img alt="../_images/overviewStreams-03.png" src="../_images/overviewStreams-03.png" style="width: 600px;" />
<p>As shown above, <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.append" title="music21.stream.Stream.append"><tt class="xref py py-meth docutils literal"><span class="pre">append()</span></tt></a> and <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.repeatAppend" title="music21.stream.Stream.repeatAppend"><tt class="xref py py-meth docutils literal"><span class="pre">repeatAppend()</span></tt></a>, automatically determine offset times for elements. To explicitly set the offset of an element when adding it to a Stream, the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.insert" title="music21.stream.Stream.insert"><tt class="xref py py-meth docutils literal"><span class="pre">insert()</span></tt></a> method can be used. This method, given an offset, will place an object in the Stream at that offset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">r1</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r1</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="o">.</span><span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n4</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&#39;b5&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n4</span><span class="o">.</span><span class="n">quarterLength</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">r1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">4.5</span><span class="p">,</span> <span class="n">n4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{0.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note F#&gt;</span>
<span class="go">{2.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{2.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.25} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{4.0} &lt;music21.note.Rest rest&gt;</span>
<span class="go">{4.5} &lt;music21.note.Note B&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;musicxml&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<img alt="../_images/overviewStreams-04.png" src="../_images/overviewStreams-04.png" style="width: 600px;" />
</div>
<div class="section" id="accessing-stream-elements-by-iteration-and-index">
<h2>Accessing Stream Elements by Iteration and Index<a class="headerlink" href="#accessing-stream-elements-by-iteration-and-index" title="Permalink to this headline">¶</a></h2>
<p>Just as there are many ways to add objects to Streams, there are many ways to get a Stream&#8217;s elements. Some of these approaches work like Python lists, using iteration or index numbers. Other approaches filter the Stream, selecting only the objects that match a certain class or tag.</p>
<p>In many situations we will want to iterate over the elements in a Stream. This can be done just like any other Python list-like object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&lt;music21.note.Note E&gt;</span>
<span class="go">&lt;music21.note.Note F#&gt;</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="go">&lt;music21.note.Rest rest&gt;</span>
<span class="go">&lt;music21.note.Note B&gt;</span>
</pre></div>
</div>
<p>Elements in Streams can also be accessed by index values, integers counting from zero and specifying the ordered positions of elements in a Stream. Importantly, the ordered position is not always the same as the offset position. Multiple elements can exist in a Stream at the same offset, and the offset values are not always in the order of index values.</p>
<p>The syntax for accessing elements by index is the same as accessing items by index in Python. Similarly, we can take slices of Streams, returning a new Stream, as we would from Python lists. As with Python lists, the last boundary of a slice (e.g. 6 in [3:6]) is not included in the slice.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span>
<span class="go">&lt;music21.stream.Stream ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">]</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{2.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.25} &lt;music21.note.Note D#&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&lt;music21.note.Note B&gt;</span>
</pre></div>
</div>
<p>While full list-like functionality of the Stream is not provided, some additional methods familiar to users of Python lists are also available. The Stream <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.index" title="music21.stream.Stream.index"><tt class="xref py py-meth docutils literal"><span class="pre">index()</span></tt></a> method can be used to get the first-encountered index of a supplied object. Given an index, an element from the Stream can be removed with the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.pop" title="music21.stream.Stream.pop"><tt class="xref py py-meth docutils literal"><span class="pre">pop()</span></tt></a> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n2</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span>
<span class="go">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n3</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">StreamException</span>: <span class="n">cannot find object (&lt;music21.note.Note D#&gt;) in Stream</span>
</pre></div>
</div>
<p>The index for <cite>n3</cite> cannot be obtained because the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.repeatAppend" title="music21.stream.Stream.repeatAppend"><tt class="xref py py-meth docutils literal"><span class="pre">repeatAppend()</span></tt></a> method makes independent copies (deep copies) of the object provided as an argument. Thus, only copies of <cite>n3</cite>, not references to <cite>n3</cite>, are stored on the Stream. There are, of course, other ways to find these Notes.</p>
</div>
<div class="section" id="accessing-stream-elements-by-class-and-offset">
<h2>Accessing Stream Elements by Class and Offset<a class="headerlink" href="#accessing-stream-elements-by-class-and-offset" title="Permalink to this headline">¶</a></h2>
<p>We often need to gather elements form a Stream based on criteria other than the index position of the element. We can gather elements based on the class (object type) of the element, but offset range, or by specific identifiers attached to the element. As before, gathering elements from a Stream will often return a new Stream with references to the collected elements.</p>
<p>Gathering elements from a Stream based on the class of the element provides a way to filter the Stream for desired types of objects. The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementsByClass" title="music21.stream.Stream.getElementsByClass"><tt class="xref py py-meth docutils literal"><span class="pre">getElementsByClass()</span></tt></a> method returns a Stream of elements that are instances or subclasses of the provided classes. The example below gathers all <a class="reference internal" href="../moduleReference/moduleNote.html#music21.note.Note" title="music21.note.Note"><tt class="xref py py-class docutils literal"><span class="pre">Note</span></tt></a> objects and then all <a class="reference internal" href="../moduleReference/moduleNote.html#music21.note.Rest" title="music21.note.Rest"><tt class="xref py py-class docutils literal"><span class="pre">Rest</span></tt></a> objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{0.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note F#&gt;</span>
<span class="go">{2.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{2.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.25} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{4.5} &lt;music21.note.Note B&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Rest</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{4.0} &lt;music21.note.Rest rest&gt;</span>
</pre></div>
</div>
<p>A number of properties available with Stream instances make getting specific object classes from a Stream easier. The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.notesAndRests" title="music21.stream.Stream.notesAndRests"><tt class="xref py py-attr docutils literal"><span class="pre">notesAndRests</span></tt></a> property returns more than just Note objects; all subclasses of <a class="reference internal" href="../moduleReference/moduleNote.html#music21.note.GeneralNote" title="music21.note.GeneralNote"><tt class="xref py py-class docutils literal"><span class="pre">GeneralNote</span></tt></a> and <a class="reference internal" href="../moduleReference/moduleChord.html#music21.chord.Chord" title="music21.chord.Chord"><tt class="xref py py-class docutils literal"><span class="pre">Chord</span></tt></a> are returned in a Stream. This property is very useful for stripping Note-like objects from notational elements such as <a class="reference internal" href="../moduleReference/moduleMeter.html#music21.meter.TimeSignature" title="music21.meter.TimeSignature"><tt class="xref py py-class docutils literal"><span class="pre">TimeSignature</span></tt></a> and <tt class="xref py py-class docutils literal"><span class="pre">Clef</span></tt> objects.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">notesAndRests</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sOut</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Similarly, the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.pitches" title="music21.stream.Stream.pitches"><tt class="xref py py-attr docutils literal"><span class="pre">pitches</span></tt></a> property returns all Pitch objects. Pitch objects, however, are not subclasses of <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.Music21Object" title="music21.base.Music21Object"><tt class="xref py py-class docutils literal"><span class="pre">Music21Object</span></tt></a>; they do not have Duration objects or offsets, and are thus returned in a Python list.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">listOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">pitches</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">listOut</span><span class="p">)</span>
<span class="go">9</span>
</pre></div>
</div>
<p>Let&#8217;s print the name of each pitch here:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">listOut</span><span class="p">]</span>
<span class="go">[&#39;E4&#39;, &#39;F#4&#39;, &#39;D#5&#39;, &#39;D#5&#39;, &#39;D#5&#39;, &#39;D#5&#39;, &#39;D#5&#39;, &#39;D#5&#39;, &#39;B5&#39;]</span>
</pre></div>
</div>
<p>Gathering elements from a Stream based a single offset or an offset range permits treating the elements as part of timed sequence of events that can be cut and sliced.</p>
<p>The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementsByOffset" title="music21.stream.Stream.getElementsByOffset"><tt class="xref py py-meth docutils literal"><span class="pre">getElementsByOffset()</span></tt></a> method returns a Stream of all elements that fall either at a single offset or within a range of two offsets provided as an argument. In both cases a Stream is returned.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getElementsByOffset</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sOut</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&lt;music21.note.Note D#&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getElementsByOffset</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sOut</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{3.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.25} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.75} &lt;music21.note.Note D#&gt;</span>
<span class="go">{4.0} &lt;music21.note.Rest rest&gt;</span>
</pre></div>
</div>
<p>In the last example, Note and Rest objects are returned within the offset range. If wanted to only gather the Note objects found in this range, we could first use the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementsByOffset" title="music21.stream.Stream.getElementsByOffset"><tt class="xref py py-meth docutils literal"><span class="pre">getElementsByOffset()</span></tt></a> and then use the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementsByClass" title="music21.stream.Stream.getElementsByClass"><tt class="xref py py-meth docutils literal"><span class="pre">getElementsByClass()</span></tt></a> method. As both methods return Streams, chained method calls are possible and idiomatic.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">getElementsByOffset</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sOut</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{3.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.25} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.5} &lt;music21.note.Note D#&gt;</span>
<span class="go">{3.75} &lt;music21.note.Note D#&gt;</span>
</pre></div>
</div>
<p>Numerous additional methods permit gathering elements by offset values and positions. See <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementAtOrBefore" title="music21.stream.Stream.getElementAtOrBefore"><tt class="xref py py-meth docutils literal"><span class="pre">getElementAtOrBefore()</span></tt></a> and  <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementAfterElement" title="music21.stream.Stream.getElementAfterElement"><tt class="xref py py-meth docutils literal"><span class="pre">getElementAfterElement()</span></tt></a> for more examples.</p>
</div>
<div class="section" id="accessing-scores-parts-measures-and-notes">
<h2>Accessing Scores, Parts, Measures, and Notes<a class="headerlink" href="#accessing-scores-parts-measures-and-notes" title="Permalink to this headline">¶</a></h2>
<p>Streams provide a way to structure and position music21 objects both hierarchically and temporally. A Stream, or a Stream subclass such as <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Measure" title="music21.stream.Measure"><tt class="xref py py-class docutils literal"><span class="pre">Measure</span></tt></a>, can be placed within another Stream.</p>
<p>A common arrangement of nested Streams is a
<a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Score" title="music21.stream.Score"><tt class="xref py py-class docutils literal"><span class="pre">Score</span></tt></a> Stream containing one or more
<a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Part" title="music21.stream.Part"><tt class="xref py py-class docutils literal"><span class="pre">Part</span></tt></a> Streams, each Part Stream in turn containing one
or more <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Measure" title="music21.stream.Measure"><tt class="xref py py-class docutils literal"><span class="pre">Measure</span></tt></a> Streams.</p>
<p>Such an arrangement of Stream objects is the common way musical scores are represented in music21. For example, importing a four-part chorale by J. S. Bach will provide a Score object with four Part Streams, each Part containing multiple Measure objects. Music21 comes with a <a class="reference internal" href="../moduleReference/moduleCorpus.html#modulecorpus"><em>music21.corpus</em></a> module that provides access to a large collection of scores, including all the Bach chorales. We can parse the score from the corpus with the <a class="reference internal" href="../moduleReference/moduleCorpus.html#music21.corpus.parse" title="music21.corpus.parse"><tt class="xref py py-func docutils literal"><span class="pre">parse()</span></tt></a> function.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sBach</span> <span class="o">=</span> <span class="n">corpus</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s">&#39;bach/bwv57.8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can access and examine elements at each level of this Score by using standard Python syntax
for lists within lists. Thus, we can see the length of each component:
first the Score which has five elements, a <a class="reference internal" href="../moduleReference/moduleMetadata.html#music21.metadata.Metadata" title="music21.metadata.Metadata"><tt class="xref py py-class docutils literal"><span class="pre">Metadata</span></tt></a> object and four parts.
Then we find the length of first Part at index one which indicates 19 objects (18 of them are measures).
Then within that part we find an object (a Measure) at index 1. All of these subprograms can
be accessed from looking within the same score object <cite>sBach</cite>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="p">)</span>
<span class="go">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">19</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="go">6</span>
</pre></div>
</div>
<p>But how did we know that index [1] would be a Part and index [1][1] would
be a measure?  As writers of the tutorial, we know this piece well enough
to know that.  But as we noted above, more than just Measures might be
stored in a Part object
(such as <a class="reference internal" href="../moduleReference/moduleInstrument.html#music21.instrument.Instrument" title="music21.instrument.Instrument"><tt class="xref py py-class docutils literal"><span class="pre">Instrument</span></tt></a> objects),
and more than just Note and Rest objects might be stored in a Measure
(such as <a class="reference internal" href="../moduleReference/moduleMeter.html#music21.meter.TimeSignature" title="music21.meter.TimeSignature"><tt class="xref py py-class docutils literal"><span class="pre">TimeSignature</span></tt></a>
and <a class="reference internal" href="../moduleReference/moduleKey.html#music21.key.KeySignature" title="music21.key.KeySignature"><tt class="xref py py-class docutils literal"><span class="pre">KeySignature</span></tt></a> objects). We it&#8217;s much safer
to filter Stream and Stream subclasses by
the class we seek. To repeat the count and select specific classes,
we can use the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementsByClass" title="music21.stream.Stream.getElementsByClass"><tt class="xref py py-meth docutils literal"><span class="pre">getElementsByClass()</span></tt></a> method.</p>
<p>Notice how the counts deviate from the examples above.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">Part</span><span class="p">))</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">Part</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">Measure</span><span class="p">))</span>
<span class="go">18</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">Part</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">Measure</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">))</span>
<span class="go">3</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementsByClass" title="music21.stream.Stream.getElementsByClass"><tt class="xref py py-meth docutils literal"><span class="pre">getElementsByClass()</span></tt></a> method can also take a
string representation of the last section of the class name, thus we could&#8217;ve rewritten
the code above as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Part&#39;</span><span class="p">))</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Part&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Measure&#39;</span><span class="p">))</span>
<span class="go">18</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Part&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Measure&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Note&#39;</span><span class="p">))</span>
<span class="go">3</span>
</pre></div>
</div>
<p>This way of doing things is a bit faster to code, but a little less safe.  Suppose,
for instance there were objects of type stream.Measure and tape.Measure; the latter
way of writing the code would get both of them.  (But this ambiguity is rare enough
that it&#8217;s safe enough to use the strings in most code.)</p>
<p>There are some convenience properties you should know about.  Calling .parts is the
same as .getElementsByClass(stream.Part) and calling .notes is the same as
.getElementsByClass([note.Note, note.Chord]).  Notice that the last example also shows
that you can give more than one class to getElementsByClass by passing in a list of
classes.   Note also that when using .parts or .notes, you do not write the () after
the name.  Also be aware that .notes does not include rests.  For that, we have a
method called .notesAndRests.</p>
<p>The index position of a Measure is often not the same as the Measure number.  For instance,
most pieces that don&#8217;t have pickup measures begin with measure 1, not zero.  Sometimes there are measure
discontinuities within a piece (e.g., some people number first and second endings with the same
measure number).
For that reason, gathering Measures is best accomplished not with getElementsByClass(stream.Measure)
but instead with either
the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.measures" title="music21.stream.Stream.measures"><tt class="xref py py-meth docutils literal"><span class="pre">measures()</span></tt></a> method (returning a Stream of Parts or Measures)
or the <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.measure" title="music21.stream.Stream.measure"><tt class="xref py py-meth docutils literal"><span class="pre">measure()</span></tt></a> method (returning a single Measure).  What is great
about these methods is that they can work on a whole score and not just a single part.</p>
<p>In the following examples a single Measure from each part is appended to a new Stream.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="mi">7</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="mi">9</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>    
</pre></div>
</div>
<img alt="../_images/overviewStreams-05.png" src="../_images/overviewStreams-05.png" style="width: 600px;" />
</div>
<div class="section" id="flattening-hierarchical-streams">
<h2>Flattening Hierarchical Streams<a class="headerlink" href="#flattening-hierarchical-streams" title="Permalink to this headline">¶</a></h2>
<p>While nested Streams offer expressive flexibility, it is often useful to be able to flatten all Stream and Stream subclasses into a single Stream containing only the elements that are not Stream subclasses. The  <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.flat" title="music21.stream.Stream.flat"><tt class="xref py py-attr docutils literal"><span class="pre">flat</span></tt></a> property provides immediate access to such a flat representation of a Stream. For example, doing a similar count of components, such as that show above, we see that we cannot get to all of the Note objects of a complete Score until we flatten its Part and Measure objects by accessing the <cite>flat</cite> attribute.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">))</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">flat</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">))</span>
<span class="go">213</span>
</pre></div>
</div>
<p>Element offsets are always relative to the Stream that contains them. For example, a Measure, when placed in a Stream, might have an offset of 16. This offset describes the position of the Measure in the Stream. Components of this Measure, such as Notes, have offset values relative only to their container, the Measure. The first Note of this Measure, then, has an offset of 0. In the following example we find that the offset of measure eight (using the <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.Music21Object.getOffsetBySite" title="music21.base.Music21Object.getOffsetBySite"><tt class="xref py py-meth docutils literal"><span class="pre">getOffsetBySite()</span></tt></a> method) is 21; the offset of the second Note in this Measure (index 1), however, is 1.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">m</span> <span class="o">=</span> <span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getElementsByClass</span><span class="p">(</span><span class="s">&#39;Measure&#39;</span><span class="p">)[</span><span class="mi">7</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">m</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">21.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">notes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span>
<span class="go">&lt;music21.note.Note B-&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">getOffsetBySite</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
<p>Flattening a structure of nested Streams will set new, shifted offsets for each of the elements on the Stream, reflecting their appropriate position in the context of the Stream from which the <cite>flat</cite> property was accessed. For example, if a flat version of the first part of the Bach chorale is obtained, the note defined above has the appropriate offset of 22 (the Measure offset of 21 plus the Note offset within this Measure of 1).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pFlat</span> <span class="o">=</span> <span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">flat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">indexN</span> <span class="o">=</span> <span class="n">pFlat</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pFlat</span><span class="p">[</span><span class="n">indexN</span><span class="p">]</span>
<span class="go">&lt;music21.note.Note B-&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pFlat</span><span class="p">[</span><span class="n">indexN</span><span class="p">]</span><span class="o">.</span><span class="n">offset</span>
<span class="go">22.0</span>
</pre></div>
</div>
<p>As an aside, it is important to recognize that the offset of the Note has not been edited; instead, a Note, as all Music21Objects, can store multiple pairs of sites and offsets. Music21Objects retain an offset relative to all Stream or Stream subclasses they are contained within, even if just in passing.</p>
</div>
<div class="section" id="accessing-stream-elements-by-id-and-group">
<h2>Accessing Stream Elements by Id and Group<a class="headerlink" href="#accessing-stream-elements-by-id-and-group" title="Permalink to this headline">¶</a></h2>
<p>All <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.Music21Object" title="music21.base.Music21Object"><tt class="xref py py-class docutils literal"><span class="pre">Music21Object</span></tt></a> subclasses, such as
<a class="reference internal" href="../moduleReference/moduleNote.html#music21.note.Note" title="music21.note.Note"><tt class="xref py py-class docutils literal"><span class="pre">Note</span></tt></a> and <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream" title="music21.stream.Stream"><tt class="xref py py-class docutils literal"><span class="pre">Stream</span></tt></a>,
have attributes for <a class="reference internal" href="../moduleReference/moduleBase.html#music21.base.Music21Object.id" title="music21.base.Music21Object.id"><tt class="xref py py-attr docutils literal"><span class="pre">id</span></tt></a>
and <tt class="xref py py-attr docutils literal"><span class="pre">group</span></tt>.</p>
<p>The <cite>id</cite> attribute is commonly used to
distinguish Part objects in a Score, but may have other applications.
The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.getElementById" title="music21.stream.Stream.getElementById"><tt class="xref py py-meth docutils literal"><span class="pre">getElementById()</span></tt></a> method can be used
to access elements of a Stream by <cite>id</cite>. As an example, after examining
all of the <cite>id</cite> attributes of the Score, a new Score can be created,
rearranging the order of the Parts by using the
<a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.insert" title="music21.stream.Stream.insert"><tt class="xref py py-meth docutils literal"><span class="pre">insert()</span></tt></a> method with an offset of zero.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">part</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">sBach</span><span class="o">.</span><span class="n">parts</span><span class="p">]</span>
<span class="go">[u&#39;Soprano&#39;, u&#39;Alto&#39;, u&#39;Tenor&#39;, u&#39;Bass&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Score</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sBach</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Bass&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sBach</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Tenor&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sBach</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Alto&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sBach</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Soprano&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sNew</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>   
</pre></div>
</div>
<img alt="../_images/overviewStreams-06.png" src="../_images/overviewStreams-06.png" style="width: 600px;" />
</div>
<div class="section" id="visualizing-streams-in-plots">
<h2>Visualizing Streams in Plots<a class="headerlink" href="#visualizing-streams-in-plots" title="Permalink to this headline">¶</a></h2>
<p>While the <tt class="xref py py-meth docutils literal"><span class="pre">show()</span></tt> method provides common
musical views of a Stream, a visual plot a Stream&#8217;s elements is very
useful. Sometimes called a piano roll, we might graph the pitch of a
Note over its position in a Measure (or offset if no Measures are
defined). The <a class="reference internal" href="../moduleReference/moduleStream.html#music21.stream.Stream.plot" title="music21.stream.Stream.plot"><tt class="xref py py-meth docutils literal"><span class="pre">plot()</span></tt></a> method permits us to
create a plot of any Stream or Stream subclass (note that the additional
package matplotlib needs to be installed to run graphs, see <a class="reference internal" href="../installing/installAdditional.html#installadditional"><em>Extending Music21 with Additional Software</em></a>
for more information). There are a large variety
of plots: see <a class="reference internal" href="../moduleReference/moduleGraph.html#modulegraph"><em>music21.graph</em></a> for a complete list. There are a number
of ways to get the desired plot; one, as demonstrated below, is to provide
the name of the plot as a string. We can also add a keyword argument for
the title of the plot (and configure many other features).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sBach</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s">&#39;Soprano&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="s">&#39;PlotHorizontalBarPitchSpaceOffset&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&#39;Soprano&#39;</span><span class="p">)</span>   
</pre></div>
</div>
<img alt="../_images/overviewStreams-07.png" src="../_images/overviewStreams-07.png" style="width: 600px;" />
</div>
</div>
<div class="section" id="advanced-topic-ordering-streams">
<h1>Advanced Topic: Ordering Streams<a class="headerlink" href="#advanced-topic-ordering-streams" title="Permalink to this headline">¶</a></h1>
<p>As list-like objects, Streams hold objects in a particular order.
These objects are usually ordered by their musical position in
the score according to their offset in quarter notes.  Objects with
the same offset are ordered by what class they are a part of.  For instance,
you&#8217;d expect that if you have a TimeSignature, Note, Clef, and KeySignature
at offset 0.0 in a piece that if you iterate through a Stream in order,
you&#8217;d get the Clef, KeySignature, TimeSignature, and Note in that order (which
is the order they appear in a Score).  Music21 automatically sorts the classes
in that order.  Classes have an attribute called &#8220;classSortOrder&#8221; that defines
the order in which they should appear.  Classes with lower classSortOrder come
first as this example indicates:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">classSortOrder</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="p">[</span><span class="n">clef</span><span class="o">.</span><span class="n">Clef</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">KeySignature</span><span class="p">,</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">]]</span>
<span class="go">[0, 2, 4, 20]</span>
</pre></div>
</div>
<p>N.B. that classSortOrder can be obtained either from the class definition (<cite>clef.Clef.classSortOrder</cite>)
or from an instance of that class (<cite>c = clef.Clef() ; c.classSortOrder</cite>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">clef</span><span class="o">.</span><span class="n">TrebleClef</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">KeySignature</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c"># 2 sharps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triple</span> <span class="o">=</span> <span class="n">meter</span><span class="o">.</span><span class="n">TimeSignature</span><span class="p">(</span><span class="s">&#39;3/8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;F#5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">obj</span><span class="o">.</span><span class="n">classSortOrder</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">triple</span><span class="p">,</span> <span class="n">n</span><span class="p">]]</span>
<span class="go">[0, 2, 4, 20]</span>
</pre></div>
</div>
<p>Thus, all new Music21Object classes should define classSortOrder somewhere.
It can be any integer (or even a floating point number).</p>
<p>If it is important that objects in at the same offset have a particular order,
you can set the order by setting the <cite>.priority</cite> attribute of each object.
The default is zero.  If two objects have the same priority then the classSortOrder
is used as a secondary comparison.  The following example creates a second note
and specifies that the first note comes before the TimeSignature, but the second comes
after:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;D5&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">triple</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Now let&#8217;s put all our objects in a Stream
at offset 0.0 in a random order and see what order the objects come out
when we iterate over the Stream:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">triple</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">el</span>
<span class="go">&lt;music21.clef.TrebleClef&gt;</span>
<span class="go">&lt;music21.key.KeySignature of 2 sharps&gt;</span>
<span class="go">&lt;music21.note.Note F#&gt;</span>
<span class="go">&lt;music21.meter.TimeSignature 3/8&gt;</span>
<span class="go">&lt;music21.note.Note D&gt;</span>
</pre></div>
</div>
<p>This is the order we hoped for.</p>
<p>There is one more way that elements in a Stream can be returned, for advanced
uses only.  Each Stream has an <cite>autoSort</cite> property.  By default it is On.  But
if you turn it off, then elements are returned in the order they are added
regardless of offset, priority, or classSortOrder.  Here is an example of that:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">Stream</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">autoSort</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;C#&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n1</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;D#&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;E&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n1</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n2</span><span class="o">.</span><span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span> <span class="c"># should come before n1 if at same offset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">n1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">n2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{4.0} &lt;music21.note.Note C#&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note E&gt;</span>
</pre></div>
</div>
<p>the setting <cite>autoSort = False</cite> can speed up some operations if you already know
that all the notes are in order.  Inside the stream.py module you&#8217;ll see some
even faster operations such as <cite>_insertCore()</cite> and <cite>_appendCore()</cite> which are
even faster and which we use when translating from one format to another.  After
running an <cite>_insertCore()</cite> operation, the Stream is in an unusuable state until
<cite>_elementsChanged()</cite> is run, which lets the Stream ruminate over its new state
as if a normal <cite>insert()</cite> or <cite>append()</cite> operation has been done.  Mixing
<cite>_insertCore()</cite> and <cite>_appendCore()</cite> commands without running <cite>_elementsChanged()</cite>
is likely to have disasterous consequences.  Use one or the other.</p>
<p>However, append does work well with <cite>autoSort = False</cite>, as this example demonstrates:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="s">&quot;F&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{4.0} &lt;music21.note.Note C#&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{5.0} &lt;music21.note.Note F&gt;</span>
</pre></div>
</div>
<p>If you want to get back to the sorted state, just turn <cite>autoSort = True</cite>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">autoSort</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{2.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{4.0} &lt;music21.note.Note C#&gt;</span>
<span class="go">{5.0} &lt;music21.note.Note F&gt;</span>
</pre></div>
</div>
<p>Note that this is a destructive operation.  Turning <cite>autoSort</cite> back to
<cite>False</cite> won&#8217;t get you back the earlier order:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">autoSort</span> <span class="o">=</span> <span class="bp">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">messyStream</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="s">&#39;text&#39;</span><span class="p">)</span>
<span class="go">{2.0} &lt;music21.note.Note E&gt;</span>
<span class="go">{2.0} &lt;music21.note.Note D#&gt;</span>
<span class="go">{4.0} &lt;music21.note.Note C#&gt;</span>
<span class="go">{5.0} &lt;music21.note.Note F&gt;</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="overviewFormats.html" title="Overview: Importing File and Data Formats"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Music21 Concepts Overview"
             >previous</a> |</li>
        <li><a href="../index.html">music21</a> &raquo;</li>
          <li><a href="index.html" >Music21 Concepts Overview</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2008-2013, Michael Scott Cuthbert and the music21 Project.
      Last updated on Jun 25, 2014.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>